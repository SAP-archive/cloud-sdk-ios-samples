# Generated by the SAP Cloud Platform SDK for iOS Assistant

## This App Project
This project can be used as-is. The source code is not protected by any license and can freely be used without restrictions, just like sample source code on our help pages.
More information about the structure of the generated application can be found on [help.sap.com](https://help.sap.com/viewer/fc1a59c210d848babfb3f758a6f55cb1/3.1/en-US/c14683672e9d4df383e8fced4ea9a019.html).

## Tutorials
Check out these tutorials and courses for deep-dives into various areas
* [Mobile Interactive Tutorials](https://www.sap.com/developer/tutorial-navigator/mobile-interactive-tutorials.html)
* [Community Tutorials](https://www.sap.com/developer/topics/cloud-platform-sdk-for-ios.html)
* [openSAP course](https://open.sap.com/courses/ios2)

## TechEd
Watch SAP TechEd sessions on mobility online at [SAP Teched Online](http://www.sapteched.com/online).


#  Steps to support multiple users in an app

## Prerequisits
1. existing SAP  account to access Cloud Platform mobile services
1. The latest version of the Assistant application

## Overview
To support multi-user scenarios you should  replace the default `SingleUserOnboardingIDManager` to your custom implementation in the `OnboardingController`. This class must implement the OnboardingIDManaging protocol and is responsible to store the `onboardingIDs` as well to decide to create a new onboarding session or restore an existing one using the `onboardingID`. It is up to your application design how you support these options.
In this sample a view controller will be presented to the users where the user can select one from the existing sessions or create a new one.

## Steps
  
1. Create a new Swift class named `MultiUserOnboardingIDManager` and implement the `OnboardingIDManaging` protocol with a simple implementation first: stores the id, returns with `.onboard` when it is asked in `flowToStart`... To make it more realistic we introduce a `User` type which contains a `name` and the `onboardingID`. This will be managed by the `MultiUserOnboardingIDManager`. It worth to create some private helper methods to store, retrieve the `Users`. This way we the users can see user names instead of `onboardingIDs`
1. Create a new `UITableViewController` descendant Swift class and name it `SelectUserViewController`. This will present the list of existing onboarding sessions.
    1. Create a small new class for the presented UITableViewCells used by SelectUserViewController. Name it `UserTableViewCell`.
        1. The cell should have a UILabel as an IBOutlet.
        1. create a const cellID: will be used to get the cell, must be set in the storyboard as well
            ```
            static let cellID = "UserSelectorCell"
            ```
    1. Declare two properties:
        1. flowSelectionCompletion: the completion handler to call when the user selected the action
        1. users: array of `User`s; set by the `MultiUserOnboardingIDManager` with the available users and used by the tableview to present the items
    1. Create new IBAction for the add user option: addUser
    1. Remove the `numberOfSections` method as we only have one section
    1. In the `tableView(_ tableView: UITableView, numberOfRowsInSection section: Int)` just return with the users.count
    1. uncomment the `cellForRowAt: indexPath` method and dequeue the cell with the id. Fill the cell with the user name blonging to that line/indexPath
        ```
        cell.userName.text = "\(users[indexPath.row].name)"
        ```
    1. implement the `didSelectRowAt indexPath` method to handle the user selection of items. Just call back on the flowCompletionHandler with the username and onboardingID  
    1. remove any other unnecessary commented code snippet from the file
1. Create the UI in the storyboard for the SelectUserViewController. Open the Main.storyboard
    1. Drop in a new UITablewViewController scene
    1. Set the class of the view controller to `SelectUserViewController`
    1. Set the `Storyboard ID` to 'SelectUserViewController'
    1. Select the prototype cell and set its class to `UserTableViewCell`
    1. Set the `identifier` of the prototype cell to 'UserSelectorCell'
    
    





